import{r as l,_ as W,R as X,b as Y,c as Z,P as f,j as e,C as ee}from"./index-C2-u5VGj.js";import{a as S}from"./apiService-C4XhZ6hP.js";import{C as ae,a as p}from"./CRow-WBhZllJW.js";import{C as M,a as z}from"./CCardBody-CCGqpgh_.js";import{C as se}from"./CCardHeader-C0Uph5j8.js";import{C as E}from"./CForm-DtOIDmFO.js";import{C as t}from"./CFormLabel-BXjc0y76.js";import{C as d}from"./CFormInput-DaoZthgO.js";import{C as b}from"./CFormSelect-DoZfjU7A.js";import{a as h}from"./index.es-DOjMPA_K.js";import{C as ne}from"./CAlert-92l0DvQx.js";import{C as ie,a as te,b as O,c as x,d as re,e as j}from"./CTable-CDnREC5m.js";import{C as oe,a as P}from"./CPaginationItem-BZfLnU3s.js";import{C as R,a as B,b as H,c as L,d as J}from"./CModalTitle-OwXmWnjY.js";import"./CFormControlWrapper-DaArQk6p.js";import"./CFormControlValidation-Co0Pip-r.js";import"./DefaultLayout-DwxpfPBj.js";import"./cil-user-Dlmw-Gem.js";var A=l.forwardRef(function(c,F){var i,r=c.align,g=c.className,N=c.fluid,_=c.rounded,o=c.thumbnail,w=W(c,["align","className","fluid","rounded","thumbnail"]);return X.createElement("img",Y({className:Z((i={},i["float-".concat(r)]=r&&(r==="start"||r==="end"),i["d-block mx-auto"]=r&&r==="center",i["img-fluid"]=N,i.rounded=_,i["img-thumbnail"]=o,i),g)||void 0},w,{ref:F}))});A.propTypes={align:f.oneOf(["start","center","end"]),className:f.string,fluid:f.bool,rounded:f.bool,thumbnail:f.bool};A.displayName="CImage";const _e=()=>{const[c,F]=l.useState([]),[i,r]=l.useState(1),[g,N]=l.useState(1),[_,o]=l.useState(!1),[w,u]=l.useState(!1),[$,C]=l.useState(!1),[s,T]=l.useState({id:"",name:"",description:"",icon:null,status:!1,meta_data:""}),[I,k]=l.useState(null);l.useEffect(()=>{y(i)},[i]);const v=a=>{k(a)},q=()=>{k(null)},y=async a=>{o(!0);try{const n=await S("POST",`listcategories?page=${a}`,{});F(n.data.data||[]),N(n.data.last_page||1)}catch(n){console.error("Error fetching categories:",n),v(n.message)}finally{o(!1)}},m=a=>{const{name:n,value:V}=a.target;T({...s,[n]:V})},D=a=>{T({...s,icon:a.target.files[0]})},G=async()=>{const a=new FormData;s.id&&a.append("id",s.id),s.name&&a.append("name",s.name),s.description&&a.append("description",s.description),s.icon&&a.append("icon",s.icon),a.append("status",s.status?"1":"0"),s.meta_data&&a.append("meta_data",s.meta_data),o(!0);try{await S("POST","addCategory",a),u(!1),y(i)}catch(n){console.error("Error adding category:",n),v(n.message)}finally{o(!1)}},K=async()=>{const a=new FormData;s.id&&a.append("id",s.id),s.name&&a.append("name",s.name),s.description&&a.append("description",s.description),s.icon&&a.append("icon",s.icon),a.append("status",s.status?"1":"0"),s.meta_data&&a.append("meta_data",s.meta_data),o(!0);try{await S("POST","updateCategory",a),C(!1),y(i)}catch(n){console.error("Error updating category:",n),v(n.message)}finally{o(!1)}},Q=async a=>{o(!0);try{await S("POST","deleteCategory",{id:a}),y(i)}catch(n){console.error("Error deleting category:",n),v(n.message)}finally{o(!1)}},U=a=>{T({id:a.id,name:a.name,description:a.description,icon:null,status:a.status,meta_data:a.meta_data}),C(!0)};return e.jsxs(ae,{children:[e.jsx(p,{xs:12,children:e.jsxs(M,{className:"mb-4",children:[e.jsx(se,{children:e.jsxs(p,{xs:12,children:[e.jsx(M,{className:"mb-4",children:e.jsx(z,{children:e.jsxs(E,{className:"row gx-3 gy-2 align-items-center",children:[e.jsxs(p,{sm:3,children:[e.jsx(t,{className:"visually-hidden",htmlFor:"specificSizeInputName",children:"Name"}),e.jsx(d,{id:"specificSizeInputName",placeholder:"Jane Doe"})]}),e.jsxs(p,{sm:3,children:[e.jsx(t,{className:"visually-hidden",htmlFor:"specificSizeSelect",children:"Preference"}),e.jsxs(b,{id:"specificSizeSelect",children:[e.jsx("option",{children:"Category..."}),e.jsx("option",{value:"1",children:"One"}),e.jsx("option",{value:"2",children:"Two"}),e.jsx("option",{value:"3",children:"Three"})]})]}),e.jsxs(p,{sm:3,children:[e.jsx(t,{className:"visually-hidden",htmlFor:"specificSizeSelect",children:"Preference"}),e.jsxs(b,{id:"specificSizeSelect",children:[e.jsx("option",{children:"City..."}),e.jsx("option",{value:"1",children:"One"}),e.jsx("option",{value:"2",children:"Two"}),e.jsx("option",{value:"3",children:"Three"})]})]}),e.jsx(p,{xs:"auto",children:e.jsx(h,{color:"primary",type:"submit",children:"Search"})}),e.jsx(p,{xs:"auto",children:e.jsx(h,{color:"primary",onClick:()=>u(!0),children:"Add"})})]})})}),I&&e.jsx(ne,{color:"danger",onClose:q,dismissible:!0,children:I})]})}),e.jsx(z,{children:_?e.jsx(ee,{color:"primary"}):e.jsxs(e.Fragment,{children:[e.jsxs(ie,{children:[e.jsx(te,{children:e.jsxs(O,{children:[e.jsx(x,{scope:"col",children:"#"}),e.jsx(x,{scope:"col",children:"Name"}),e.jsx(x,{scope:"col",children:"Description"}),e.jsx(x,{scope:"col",children:"Icon"}),e.jsx(x,{scope:"col",children:"Status"}),e.jsx(x,{scope:"col",children:"Actions"})]})}),e.jsx(re,{children:c.map((a,n)=>e.jsxs(O,{children:[e.jsx(j,{children:n+1}),e.jsx(j,{children:a.name}),e.jsx(j,{children:a.description}),e.jsx(j,{children:a.icon?e.jsx(A,{src:"https://ftp.dev.tourkokan.com/"+a.icon,alt:a.name,width:"50"}):"No Image"}),e.jsx(j,{children:a.status?"Active":"Inactive"}),e.jsxs(j,{children:[e.jsx(h,{color:"warning",size:"sm",onClick:()=>U(a),children:"Edit"})," ",e.jsx(h,{color:"danger",size:"sm",onClick:()=>Q(a.id),children:"Delete"})]})]},a.id))})]}),e.jsxs(oe,{children:[e.jsx(P,{disabled:i<=1,onClick:()=>r(i-1),children:"Previous"}),Array.from({length:g},(a,n)=>e.jsx(P,{active:n+1===i,onClick:()=>r(n+1),children:n+1},n)),e.jsx(P,{disabled:i>=g,onClick:()=>r(i+1),children:"Next"})]})]})})]})}),e.jsxs(R,{visible:w,onClose:()=>u(!1),children:[e.jsx(B,{onClose:()=>u(!1),children:e.jsx(H,{children:"Add Category"})}),e.jsx(L,{children:e.jsxs(E,{children:[e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(d,{id:"name",name:"name",value:s.name,onChange:m}),e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(d,{id:"description",name:"description",value:s.description,onChange:m}),e.jsx(t,{htmlFor:"icon",children:"Icon"}),e.jsx(d,{type:"file",id:"icon",name:"icon",onChange:D}),e.jsx(t,{htmlFor:"status",children:"Status"}),e.jsxs(b,{id:"status",name:"status",value:s.status,onChange:m,children:[e.jsx("option",{value:!0,children:"Active"}),e.jsx("option",{value:!1,children:"Inactive"})]}),e.jsx(t,{htmlFor:"meta_data",children:"Meta Data"}),e.jsx(d,{id:"meta_data",name:"meta_data",value:s.meta_data,onChange:m})]})}),e.jsxs(J,{children:[e.jsx(h,{color:"secondary",onClick:()=>u(!1),children:"Close"}),e.jsx(h,{color:"primary",onClick:G,children:"Add"})]})]}),e.jsxs(R,{visible:$,onClose:()=>C(!1),children:[e.jsx(B,{onClose:()=>C(!1),children:e.jsx(H,{children:"Edit Category"})}),e.jsx(L,{children:e.jsxs(E,{children:[e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(d,{id:"name",name:"name",value:s.name,onChange:m}),e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(d,{id:"description",name:"description",value:s.description,onChange:m}),e.jsx(t,{htmlFor:"icon",children:"Icon"}),e.jsx(d,{type:"file",id:"icon",name:"icon",onChange:D}),e.jsx(t,{htmlFor:"status",children:"Status"}),e.jsxs(b,{id:"status",name:"status",value:s.status,onChange:m,children:[e.jsx("option",{value:!0,children:"Active"}),e.jsx("option",{value:!1,children:"Inactive"})]}),e.jsx(t,{htmlFor:"meta_data",children:"Meta Data"}),e.jsx(d,{id:"meta_data",name:"meta_data",value:s.meta_data,onChange:m})]})}),e.jsxs(J,{children:[e.jsx(h,{color:"secondary",onClick:()=>C(!1),children:"Close"}),e.jsx(h,{color:"primary",onClick:K,children:"Save Changes"})]})]})]})};export{_e as default};
