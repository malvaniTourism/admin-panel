import{r,j as e,C as U}from"./index-C_97uTuT.js";import{a as f}from"./apiService-C4XhZ6hP.js";import{C as V,a as m}from"./CRow-erf8A5k2.js";import{C as A,a as E}from"./CCardBody-BYP_TP2i.js";import{C as W}from"./CCardHeader-CWNseq0B.js";import{C as y}from"./CForm-C7FUdJhW.js";import{C as n}from"./CFormLabel-Dl2IerMF.js";import{C as o}from"./CFormInput-D3SJmXDg.js";import{C as g}from"./CFormSelect-DLyQjtd7.js";import{a as d}from"./index.es-D7b7gv03.js";import{C as X}from"./CAlert-BYqfKBLM.js";import{C as Y,a as Z,b as N,c as h,d as ee,e as p}from"./CTable-C25I-F83.js";import{C as ae}from"./CImage-DtxoRS8L.js";import{C as se,a as F}from"./CPaginationItem-DMzvVPre.js";import{C as D,a as I,b as P,c as k,d as M}from"./CModalTitle-BXuZNdtj.js";import"./CFormControlWrapper-CZ6xK6YU.js";import"./CFormControlValidation-CxVgbYGZ.js";import"./DefaultLayout-s_h2tejU.js";import"./cil-user-Dlmw-Gem.js";const ye=()=>{const[z,O]=r.useState([]),[t,v]=r.useState(1),[_,B]=r.useState(1),[H,l]=r.useState(!1),[R,x]=r.useState(!1),[L,j]=r.useState(!1),[s,S]=r.useState({id:"",name:"",description:"",icon:null,status:!1,meta_data:""}),[w,b]=r.useState(null);r.useEffect(()=>{u(t)},[t]);const C=a=>{b(a)},J=()=>{b(null)},u=async a=>{l(!0);try{const i=await f("POST",`listcategories?page=${a}`,{});O(i.data.data||[]),B(i.data.last_page||1)}catch(i){console.error("Error fetching categories:",i),C(i.message)}finally{l(!1)}},c=a=>{const{name:i,value:Q}=a.target;S({...s,[i]:Q})},T=a=>{S({...s,icon:a.target.files[0]})},$=async()=>{const a=new FormData;s.id&&a.append("id",s.id),s.name&&a.append("name",s.name),s.description&&a.append("description",s.description),s.icon&&a.append("icon",s.icon),a.append("status",s.status?"1":"0"),s.meta_data&&a.append("meta_data",s.meta_data),l(!0);try{await f("POST","addCategory",a),x(!1),u(t)}catch(i){console.error("Error adding category:",i),C(i.message)}finally{l(!1)}},q=async()=>{const a=new FormData;s.id&&a.append("id",s.id),s.name&&a.append("name",s.name),s.description&&a.append("description",s.description),s.icon&&a.append("icon",s.icon),a.append("status",s.status?"1":"0"),s.meta_data&&a.append("meta_data",s.meta_data),l(!0);try{await f("POST","updateCategory",a),j(!1),u(t)}catch(i){console.error("Error updating category:",i),C(i.message)}finally{l(!1)}},G=async a=>{l(!0);try{await f("POST","deleteCategory",{id:a}),u(t)}catch(i){console.error("Error deleting category:",i),C(i.message)}finally{l(!1)}},K=a=>{S({id:a.id,name:a.name,description:a.description,icon:null,status:a.status,meta_data:a.meta_data}),j(!0)};return e.jsxs(V,{children:[e.jsx(m,{xs:12,children:e.jsxs(A,{className:"mb-4",children:[e.jsx(W,{children:e.jsxs(m,{xs:12,children:[e.jsx(A,{className:"mb-4",children:e.jsx(E,{children:e.jsxs(y,{className:"row gx-3 gy-2 align-items-center",children:[e.jsxs(m,{sm:3,children:[e.jsx(n,{className:"visually-hidden",htmlFor:"specificSizeInputName",children:"Name"}),e.jsx(o,{id:"specificSizeInputName",placeholder:"Jane Doe"})]}),e.jsxs(m,{sm:3,children:[e.jsx(n,{className:"visually-hidden",htmlFor:"specificSizeSelect",children:"Preference"}),e.jsxs(g,{id:"specificSizeSelect",children:[e.jsx("option",{children:"Category..."}),e.jsx("option",{value:"1",children:"One"}),e.jsx("option",{value:"2",children:"Two"}),e.jsx("option",{value:"3",children:"Three"})]})]}),e.jsxs(m,{sm:3,children:[e.jsx(n,{className:"visually-hidden",htmlFor:"specificSizeSelect",children:"Preference"}),e.jsxs(g,{id:"specificSizeSelect",children:[e.jsx("option",{children:"City..."}),e.jsx("option",{value:"1",children:"One"}),e.jsx("option",{value:"2",children:"Two"}),e.jsx("option",{value:"3",children:"Three"})]})]}),e.jsx(m,{xs:"auto",children:e.jsx(d,{color:"primary",type:"submit",children:"Search"})}),e.jsx(m,{xs:"auto",children:e.jsx(d,{color:"primary",onClick:()=>x(!0),children:"Add"})})]})})}),w&&e.jsx(X,{color:"danger",onClose:J,dismissible:!0,children:w})]})}),e.jsx(E,{children:H?e.jsx(U,{color:"primary"}):e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(N,{children:[e.jsx(h,{scope:"col",children:"#"}),e.jsx(h,{scope:"col",children:"Name"}),e.jsx(h,{scope:"col",children:"Description"}),e.jsx(h,{scope:"col",children:"Icon"}),e.jsx(h,{scope:"col",children:"Status"}),e.jsx(h,{scope:"col",children:"Actions"})]})}),e.jsx(ee,{children:z.map((a,i)=>e.jsxs(N,{children:[e.jsx(p,{children:i+1}),e.jsx(p,{children:a.name}),e.jsx(p,{children:a.description}),e.jsx(p,{children:a.icon?e.jsx(ae,{src:"https://ftp.dev.tourkokan.com/"+a.icon,alt:a.name,width:"50"}):"No Image"}),e.jsx(p,{children:a.status?"Active":"Inactive"}),e.jsxs(p,{children:[e.jsx(d,{color:"warning",size:"sm",onClick:()=>K(a),children:"Edit"})," ",e.jsx(d,{color:"danger",size:"sm",onClick:()=>G(a.id),children:"Delete"})]})]},a.id))})]}),e.jsxs(se,{children:[e.jsx(F,{disabled:t<=1,onClick:()=>v(t-1),children:"Previous"}),Array.from({length:_},(a,i)=>e.jsx(F,{active:i+1===t,onClick:()=>v(i+1),children:i+1},i)),e.jsx(F,{disabled:t>=_,onClick:()=>v(t+1),children:"Next"})]})]})})]})}),e.jsxs(D,{visible:R,onClose:()=>x(!1),children:[e.jsx(I,{onClose:()=>x(!1),children:e.jsx(P,{children:"Add Category"})}),e.jsx(k,{children:e.jsxs(y,{children:[e.jsx(n,{htmlFor:"name",children:"Name"}),e.jsx(o,{id:"name",name:"name",value:s.name,onChange:c}),e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(o,{id:"description",name:"description",value:s.description,onChange:c}),e.jsx(n,{htmlFor:"icon",children:"Icon"}),e.jsx(o,{type:"file",id:"icon",name:"icon",onChange:T}),e.jsx(n,{htmlFor:"status",children:"Status"}),e.jsxs(g,{id:"status",name:"status",value:s.status,onChange:c,children:[e.jsx("option",{value:!0,children:"Active"}),e.jsx("option",{value:!1,children:"Inactive"})]}),e.jsx(n,{htmlFor:"meta_data",children:"Meta Data"}),e.jsx(o,{id:"meta_data",name:"meta_data",value:s.meta_data,onChange:c})]})}),e.jsxs(M,{children:[e.jsx(d,{color:"secondary",onClick:()=>x(!1),children:"Close"}),e.jsx(d,{color:"primary",onClick:$,children:"Add"})]})]}),e.jsxs(D,{visible:L,onClose:()=>j(!1),children:[e.jsx(I,{onClose:()=>j(!1),children:e.jsx(P,{children:"Edit Category"})}),e.jsx(k,{children:e.jsxs(y,{children:[e.jsx(n,{htmlFor:"name",children:"Name"}),e.jsx(o,{id:"name",name:"name",value:s.name,onChange:c}),e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(o,{id:"description",name:"description",value:s.description,onChange:c}),e.jsx(n,{htmlFor:"icon",children:"Icon"}),e.jsx(o,{type:"file",id:"icon",name:"icon",onChange:T}),e.jsx(n,{htmlFor:"status",children:"Status"}),e.jsxs(g,{id:"status",name:"status",value:s.status,onChange:c,children:[e.jsx("option",{value:!0,children:"Active"}),e.jsx("option",{value:!1,children:"Inactive"})]}),e.jsx(n,{htmlFor:"meta_data",children:"Meta Data"}),e.jsx(o,{id:"meta_data",name:"meta_data",value:s.meta_data,onChange:c})]})}),e.jsxs(M,{children:[e.jsx(d,{color:"secondary",onClick:()=>j(!1),children:"Close"}),e.jsx(d,{color:"primary",onClick:q,children:"Save Changes"})]})]})]})};export{ye as default};
