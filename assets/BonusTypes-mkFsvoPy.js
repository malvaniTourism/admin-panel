import{r,j as e,C as K}from"./index-Ba_1EXRB.js";import{a as C}from"./apiService-Vl9oN885.js";import"./DropdownSearch-cuEweuZa.js";import{C as Q,a as y}from"./CRow-DbAUE43J.js";import{C as v,a as w}from"./CCardBody-BvJ3h_ev.js";import{C as V}from"./CCardHeader-jy5dHsUz.js";import{a as p}from"./index.es-Dx0lWxSU.js";import{C as W}from"./CAlert-xiS30tfx.js";import{C as X,a as Y,b as E,c as l,d as Z,e as t}from"./CTable-B18y1nAZ.js";import{C as ee,a as T}from"./CPaginationItem-CumA94tf.js";import{C as P,a as k,b as M,c as D,d as N}from"./CModalTitle-DRlwZW4Z.js";import{C as H}from"./CForm-CenzH3o3.js";import{C as c}from"./CFormLabel-Cbp_EF4p.js";import{C as m}from"./CFormInput-sExoWGN0.js";import"./CCloseButton-CuNmWMcP.js";import"./DefaultLayout-B3e2arlW.js";import"./cil-user-Dlmw-Gem.js";import"./CFormControlWrapper-CCOQmMx8.js";import"./CFormControlValidation-DqmNcN3y.js";const ye=()=>{const[O,_]=r.useState([]),[a,f]=r.useState(1),[S,I]=r.useState(1),[R,i]=r.useState(!1),[z,h]=r.useState(!1),[L,x]=r.useState(!1),[o,b]=r.useState({id:"",name:"",code:"",amount:"",description:""}),[B,A]=r.useState(null);r.useState(),r.useEffect(()=>{j(a)},[a]);const u=s=>{A(s)},U=()=>{A(null)},j=async s=>{i(!0);try{const n=await C("POST",`listBonusTypes?page=${s}`,{});_(n.data.data||[]),I(n.data.last_page||1)}catch(n){console.error("Error fetching categories:",n),u(n.message)}finally{i(!1)}},$=async()=>{const s=new FormData;o.name&&s.append("name",o.name),o.code&&s.append("code",o.code),o.amount&&s.append("amount",o.amount),o.description&&s.append("description",o.description),i(!0);try{await C("POST","addBonusType",s),h(!1),j(a)}catch(n){console.error("Error adding bonus type:",n),u(n.message)}finally{i(!1)}},q=async()=>{const s=new FormData;o.id&&s.append("id",o.id),o.name&&s.append("name",o.name),o.code&&s.append("code",o.code),o.amount&&s.append("amount",o.amount),o.description&&s.append("description",o.description),i(!0);try{await C("POST","updateBonusType",s),x(!1),j(a)}catch(n){console.error("Error updating Bonus Type:",n),u(n.message)}finally{i(!1)}},G=async s=>{i(!0);try{await C("POST","deleteBonusType",{id:s}),j(a)}catch(n){console.error("Error deleting Bonus Type:",n),u(n.message)}finally{i(!1)}},J=s=>{b({id:s.id,name:s.name,code:s.code,amount:s.amount,description:s.description}),x(!0)},d=s=>{const{name:n,value:g}=s.target;b(F=>(console.log(g),g==2?{...F,[n]:""}:{...F,[n]:g}))};return e.jsxs(Q,{children:[e.jsx(y,{xs:12,children:e.jsxs(v,{className:"mb-4",children:[e.jsx(V,{children:e.jsxs(y,{xs:12,children:[e.jsx(v,{className:"mb-4",children:e.jsx(w,{children:e.jsx(y,{xs:"auto",children:e.jsx(p,{color:"primary",onClick:()=>h(!0),children:"Add"})})})}),B&&e.jsx(W,{color:"danger",onClose:U,dismissible:!0,children:B})]})}),e.jsx(w,{children:R?e.jsx(K,{color:"primary"}):e.jsxs(e.Fragment,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:e.jsxs(E,{children:[e.jsx(l,{scope:"col",children:"#"}),e.jsx(l,{scope:"col",children:"Name"}),e.jsx(l,{scope:"col",children:"Code"}),e.jsx(l,{scope:"col",children:"Amount"}),e.jsx(l,{scope:"col",children:"Description"}),e.jsx(l,{scope:"col",children:"Created At"}),e.jsx(l,{scope:"col",children:"Updated At"}),e.jsx(l,{scope:"col",children:"Actions"})]})}),e.jsx(Z,{children:O.map((s,n)=>e.jsxs(E,{children:[e.jsx(t,{children:n+1}),e.jsx(t,{children:s.name}),e.jsx(t,{children:s.code}),e.jsx(t,{children:s.amount}),e.jsx(t,{children:s.description}),e.jsx(t,{children:s.created_at}),e.jsx(t,{children:s.updated_at}),e.jsxs(t,{children:[e.jsx(p,{color:"warning",size:"sm",onClick:()=>J(s),children:"Edit"})," ",e.jsx(p,{color:"danger",size:"sm",onClick:()=>G(s.id),children:"Delete"})]})]},s.id))})]}),e.jsxs(ee,{children:[e.jsx(T,{disabled:a<=1,onClick:()=>f(a-1),children:"Previous"}),Array.from({length:S},(s,n)=>e.jsx(T,{active:n+1===a,onClick:()=>f(n+1),children:n+1},n)),e.jsx(T,{disabled:a>=S,onClick:()=>f(a+1),children:"Next"})]})]})})]})}),e.jsxs(P,{visible:z,onClose:()=>h(!1),children:[e.jsx(k,{onClose:()=>h(!1),children:e.jsx(M,{children:"Add Bonus Type"})}),e.jsx(D,{children:e.jsxs(H,{children:[e.jsx(c,{htmlFor:"name",children:"Name"}),e.jsx(m,{id:"name",name:"name",value:o.name,onChange:d}),e.jsx(c,{htmlFor:"code",children:"Code"}),e.jsx(m,{id:"code",name:"code",value:o.code,onChange:d}),e.jsx(c,{htmlFor:"amount",children:"Amount"}),e.jsx(m,{id:"amount",name:"amount",value:o.amount,onChange:d}),e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(m,{id:"description",name:"description",value:o.description,onChange:d})]})}),e.jsxs(N,{children:[e.jsx(p,{color:"secondary",onClick:()=>h(!1),children:"Close"}),e.jsx(p,{color:"primary",onClick:$,children:"Add"})]})]}),e.jsxs(P,{visible:L,onClose:()=>x(!1),children:[e.jsx(k,{onClose:()=>x(!1),children:e.jsx(M,{children:"Edit Category"})}),e.jsx(D,{children:e.jsxs(H,{children:[e.jsx(c,{htmlFor:"name",children:"Name"}),e.jsx(m,{id:"name",name:"name",value:o.name,onChange:d}),e.jsx(c,{htmlFor:"code",children:"Code"}),e.jsx(m,{id:"code",name:"code",value:o.code,onChange:d}),e.jsx(c,{htmlFor:"amount",children:"Amount"}),e.jsx(m,{id:"amount",name:"amount",value:o.amount,onChange:d}),e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(m,{id:"description",name:"description",value:o.description,onChange:d})]})}),e.jsxs(N,{children:[e.jsx(p,{color:"secondary",onClick:()=>x(!1),children:"Close"}),e.jsx(p,{color:"primary",onClick:q,children:"Save Changes"})]})]})]})};export{ye as default};
