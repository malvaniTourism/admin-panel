import{r as t,j as e,C as H}from"./index-3W2ePfhB.js";import{a as w}from"./apiService-DsQ6XeP6.js";import{D as L}from"./DropdownSearch-DC_A0nQg.js";import{C as R,a as i}from"./CRow-B0sWHLTy.js";import{C as T,a as F}from"./CCardBody-DBxQWMbS.js";import{C as J}from"./CCardHeader-BqPIqF2x.js";import{C as _}from"./CForm-DKKWxj_W.js";import{C as o}from"./CFormLabel-BZ2HtkUe.js";import{C as c}from"./CFormInput-DS9pEd1X.js";import{C as B}from"./CFormSelect-YLHRi6qz.js";import{a as j}from"./index.es-CYrrfrxi.js";import{C as $,a as q,b as D,c as n,d as G,e as l}from"./CTable-DXVZpP9M.js";import{C as K,a as g}from"./CPaginationItem-CIGurvuP.js";import{C as Q,a as U,b as V,c as W,d as X}from"./CModalTitle-IKjHMF5F.js";import"./CFormControlWrapper-BgOwKrag.js";import"./CFormControlValidation-8-dBNAUe.js";import"./CCloseButton-DKiBS7sc.js";import"./DefaultLayout-rmcqfGId.js";import"./cil-user-Dlmw-Gem.js";const Ce=()=>{const[P,I]=t.useState([]),[m,p]=t.useState(1),[u,N]=t.useState(1),[A,x]=t.useState(!1),[M,h]=t.useState(!1),[f,y]=t.useState(null),[r,S]=t.useState({id:"",name:"",code:"",amount:"",description:""});t.useEffect(()=>{k(m)},[m]);const v=a=>{y(a)},O=()=>{y(null)},k=async a=>{localStorage.getItem("token"),x(!0);try{const s=await w("POST",`listBanners?page=${a}`,{});if(s.success==!1){v((s==null?void 0:s.message)||"Something went wrong");return}if(console.log("API response:",s),s&&s.data)I(s.data.data||[]),N(s.data.last_page||1);else throw new Error("Invalid data structure")}catch(s){console.error("Error fetching banners:",s)}finally{x(!1)}},E=async()=>{const a=new FormData;r.name&&a.append("name",r.name),r.code&&a.append("code",r.code),r.amount&&a.append("amount",r.amount),r.description&&a.append("description",r.description),x(!0);try{await w("POST","addBonusType",a),h(!1),fetchBonusTypes(m)}catch(s){console.error("Error adding bonus type:",s),v(s.message)}finally{x(!1)}},d=a=>{const{name:s,value:C}=a.target;S(b=>(console.log(C),C==2?{...b,[s]:""}:{...b,[s]:C}))},z=a=>{console.log(a),S({...r,parent_id:a})};return e.jsxs(R,{children:[e.jsx(i,{xs:12,children:e.jsxs(T,{className:"mb-4",children:[e.jsx(J,{children:e.jsxs(i,{xs:12,children:[e.jsx(T,{className:"mb-4",children:e.jsx(F,{children:e.jsxs(_,{className:"row gx-3 gy-2 align-items-center",children:[e.jsxs(i,{sm:3,children:[e.jsx(o,{className:"visually-hidden",htmlFor:"specificSizeInputName",children:"Name"}),e.jsx(c,{id:"specificSizeInputName",placeholder:"Jane Doe"})]}),e.jsxs(i,{sm:3,children:[e.jsx(o,{className:"visually-hidden",htmlFor:"specificSizeSelect",children:"Preference"}),e.jsxs(B,{id:"specificSizeSelect",children:[e.jsx("option",{children:"Category..."}),e.jsx("option",{value:"1",children:"One"}),e.jsx("option",{value:"2",children:"Two"}),e.jsx("option",{value:"3",children:"Three"})]})]}),e.jsxs(i,{sm:3,children:[e.jsx(o,{className:"visually-hidden",htmlFor:"specificSizeSelect",children:"Preference"}),e.jsxs(B,{id:"specificSizeSelect",children:[e.jsx("option",{children:"City..."}),e.jsx("option",{value:"1",children:"One"}),e.jsx("option",{value:"2",children:"Two"}),e.jsx("option",{value:"3",children:"Three"})]})]}),e.jsx(i,{xs:"auto",children:e.jsx(j,{color:"primary",type:"submit",children:"Submit"})}),e.jsx(i,{xs:"auto",children:e.jsx(j,{color:"primary",onClick:()=>h(!0),children:"Add"})})]})})}),f&&e.jsx(CAlert,{color:"danger",onClose:O,dismissible:!0,children:f})]})}),e.jsx(F,{children:A?e.jsx(H,{color:"primary"}):e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsx(q,{children:e.jsxs(D,{children:[e.jsx(n,{scope:"col",children:"#"}),e.jsx(n,{scope:"col",children:"Name"}),e.jsx(n,{scope:"col",children:"Image"}),e.jsx(n,{scope:"col",children:"Start Date"}),e.jsx(n,{scope:"col",children:"Duration"}),e.jsx(n,{scope:"col",children:"Level"}),e.jsx(n,{scope:"col",children:"Image Orientation"}),e.jsx(n,{scope:"col",children:"Status"}),e.jsx(n,{scope:"col",children:"Banner Owner"}),e.jsx(n,{scope:"col",children:"Banner Owner Category"})]})}),e.jsx(G,{children:P.map((a,s)=>e.jsxs(D,{children:[e.jsx(n,{scope:"row",children:s+1}),e.jsx(l,{children:a.name}),e.jsx(l,{children:a.image}),e.jsx(l,{children:a.start_date}),e.jsx(l,{children:a.duration}),e.jsx(l,{children:a.level}),e.jsx(l,{children:a.image_orientation}),e.jsx(l,{children:a.status?"true":"false"}),e.jsx(l,{children:a.bannerable.name}),e.jsx(l,{children:a.bannerable.category.name})]},a.id))})]}),e.jsxs(K,{"aria-label":"Page navigation example",children:[e.jsx(g,{disabled:m===1,onClick:()=>p(a=>Math.max(a-1,1)),children:"Previous"}),Array.from({length:u},(a,s)=>e.jsx(g,{active:s+1===m,onClick:()=>p(s+1),children:s+1},s+1)),e.jsx(g,{disabled:m===u,onClick:()=>p(a=>Math.min(a+1,u)),children:"Next"})]})]})})]})}),e.jsxs(Q,{visible:M,onClose:()=>h(!1),children:[e.jsx(U,{onClose:()=>h(!1),children:e.jsx(V,{children:"Add Bonus Type"})}),e.jsx(W,{children:e.jsxs(_,{children:[e.jsx(o,{htmlFor:"name",children:"Name"}),e.jsx(c,{id:"name",name:"name",value:r.name,onChange:d}),e.jsx(o,{htmlFor:"image",children:"Image"}),e.jsx(c,{id:"image",name:"image",value:r.image,onChange:d}),e.jsx(o,{htmlFor:"start_date",children:"Start Date"}),e.jsx(c,{id:"start_date",name:"start_date",value:r.start_date,onChange:d}),e.jsx(i,{sm:3,children:e.jsx(L,{onChange:z,endpoint:"bannerDaysDD",label:"Duration"})}),e.jsx(o,{htmlFor:"level",children:"Level"}),e.jsx(c,{id:"level",name:"level",value:r.level,onChange:d}),e.jsx(o,{htmlFor:"image_orientation",children:"Image Orientation"}),e.jsx(c,{id:"image_orientation",name:"image_orientation",value:r.image_orientation,onChange:d}),e.jsx(o,{htmlFor:"status",children:"Status"}),e.jsx(c,{id:"status",name:"status",value:r.status,onChange:d}),e.jsx(o,{htmlFor:"bannerable_type",children:"Bannerable Type"}),e.jsx(c,{id:"bannerable_type",name:"bannerable_type",value:r.bannerable_type,onChange:d})]})}),e.jsxs(X,{children:[e.jsx(j,{color:"secondary",onClick:()=>h(!1),children:"Close"}),e.jsx(j,{color:"primary",onClick:E,children:"Add"})]})]})]})};export{Ce as default};
