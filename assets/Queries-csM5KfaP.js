import{r as o,j as e,C as k}from"./index-DXNJ3qnV.js";import{a as C}from"./apiService-DwPsU87-.js";import{C as v,a as l}from"./CRow-DqZ2pQlZ.js";import{C as u,a as f}from"./CCardBody-D9GuwQFG.js";import{C as E}from"./CCardHeader-BHjmFolr.js";import{C as A}from"./CForm-D29Y_Nzf.js";import{C as g}from"./CFormLabel-CjNZ9pG4.js";import{C as Q}from"./CFormInput-Ds5scf-H.js";import{C as I}from"./CFormSelect--SgC9QgV.js";import{a as z}from"./index.es-BUvWMQbl.js";import{C as D}from"./CAlert-CqvdhHvX.js";import{C as R,a as B,b as S,c as r,d as H,e as t}from"./CTable-CaVMF9Hm.js";import{C as O}from"./CFormSwitch-dxs9low9.js";import{C as L,a as h}from"./CPaginationItem-CqzUEHH7.js";import"./CFormControlWrapper-BFDM-HEL.js";import"./CFormControlValidation-DujVE23N.js";import"./CCloseButton-X9YeYwqf.js";const ce=()=>{const[y,b]=o.useState([]),[c,n]=o.useState(1),[m,w]=o.useState(1),[P,i]=o.useState(!1);o.useState({id:"",status:!1});const[x,_]=o.useState(null),[N,F]=o.useState();o.useEffect(()=>{p(c)},[c]);const p=async s=>{i(!0);try{const a=await C("POST",`getQueries?page=${s}`,{});b(a.data.data||[]),w(a.data.last_page||1)}catch(a){console.error("Error fetching queries:",a),showAlert(a.message)}finally{i(!1)}},T=async(s,a)=>{const d=new FormData;d.append("id",s),d.append("status",a),F(!N),i(!0);try{await C("POST","updateQuery",d),p(c)}catch(j){console.error("Error updating category:",j),showAlert(j.message)}finally{i(!1)}};return e.jsx(v,{children:e.jsx(l,{xs:12,children:e.jsxs(u,{className:"mb-4",children:[e.jsx(E,{children:e.jsxs(l,{xs:12,children:[e.jsx(u,{className:"mb-4",children:e.jsx(f,{children:e.jsxs(A,{className:"row gx-3 gy-2 align-items-center",children:[e.jsxs(l,{sm:3,children:[e.jsx(g,{className:"visually-hidden",htmlFor:"specificSizeInputName",children:"Name"}),e.jsx(Q,{id:"specificSizeInputName",placeholder:"Jane Doe"})]}),e.jsxs(l,{sm:3,children:[e.jsx(g,{className:"visually-hidden",htmlFor:"specificSizeSelect",children:"Preference"}),e.jsxs(I,{id:"specificSizeSelect",children:[e.jsx("option",{children:"Status..."}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"unread",children:"Unread"})]})]}),e.jsx(l,{xs:"auto",children:e.jsx(z,{color:"primary",type:"submit",children:"Search"})})]})})}),x&&e.jsx(D,{color:"danger",onClose:clearAlert,dismissible:!0,children:x})]})}),e.jsx(f,{children:P?e.jsx(k,{color:"primary"}):e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsx(B,{children:e.jsxs(S,{children:[e.jsx(r,{scope:"col",children:"#"}),e.jsx(r,{scope:"col",children:"Name"}),e.jsx(r,{scope:"col",children:"Email"}),e.jsx(r,{scope:"col",children:"Phone"}),e.jsx(r,{scope:"col",children:"message"}),e.jsx(r,{scope:"col",children:"Status"}),e.jsx(r,{scope:"col",children:"Query On"}),e.jsx(r,{scope:"col",children:"Catgeory"}),e.jsx(r,{scope:"col",children:"Actions"})]})}),e.jsx(H,{children:y.map((s,a)=>e.jsxs(S,{children:[e.jsx(t,{children:a+1}),e.jsx(t,{children:s.name}),e.jsx(t,{children:s.email}),e.jsx(t,{children:s.phone}),e.jsx(t,{children:s.message}),e.jsx(t,{children:s.status}),e.jsx(t,{children:s.contactable?s.contactable.name:""}),e.jsx(t,{children:s.contactable?s.contactable.category.name:""}),e.jsx(t,{children:e.jsx(O,{id:`formSwitchCheckChecked-${s.id}`,defaultChecked:!0,disabled:s.status==="read",onChange:()=>T(s.id,s.status=="read"?"unread":"read")})})]},s.id))})]}),e.jsxs(L,{children:[e.jsx(h,{disabled:c<=1,onClick:()=>n(c-1),children:"Previous"}),Array.from({length:m},(s,a)=>e.jsx(h,{active:a+1===c,onClick:()=>n(a+1),children:a+1},a)),e.jsx(h,{disabled:c>=m,onClick:()=>n(c+1),children:"Next"})]})]})})]})})})};export{ce as default};
