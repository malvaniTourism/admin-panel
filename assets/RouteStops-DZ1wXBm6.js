import{r as l,j as e,C as A}from"./index-CJkMoobl.js";import{a as T}from"./apiService-C4XhZ6hP.js";import{D as v}from"./DropdownSearch-CHibabL8.js";import{C as N,a as i}from"./CRow-B6rZDrMH.js";import{C as u,a as C}from"./CCardBody-e2dIRu1F.js";import{C as E}from"./CCardHeader-BfPMArJP.js";import{C as F}from"./CForm-DNa9OEyG.js";import{C as B}from"./CFormInput-ClM7_3wd.js";import{a as f}from"./index.es-g-IK5C-f.js";import{C as H}from"./CAlert-BAvv5-A4.js";import{C as I,a as k,b as S,c as a,d as z,e as t}from"./CTable-XiHs_9Db.js";import"./CFormControlWrapper-hsy96VfT.js";import"./CFormControlValidation-BNr3UDaa.js";import"./CFormLabel-DlAN-kIg.js";import"./CCloseButton-BZUQHCfc.js";const $=()=>{var j;const[c,g]=l.useState([]),[b,d]=l.useState(!1),[h,m]=l.useState(null),[o,x]=l.useState({search:"",source_place_id:""}),p=r=>{m(r)},y=()=>{m(null)},D=async r=>{d(!0);try{const s=await T("POST","routeDetails",r);if(console.log("resp",s),!s.success){p(s.message.destination_place_id);return}g(s.data||[])}catch(s){console.error("Error fetching routes:",s),p(s.message)}finally{d(!1)}},_=()=>{const r=new FormData;o.search&&r.append("search",o.search),o.id&&r.append("id",o.id),D(r)},w=r=>{const{name:s,value:n}=r.target;x({...o,[s]:n})},R=r=>{x({...o,id:r})};return e.jsx(N,{children:e.jsx(i,{xs:12,children:e.jsxs(u,{className:"mb-4",children:[e.jsx(E,{children:e.jsxs(i,{xs:12,children:[e.jsx(u,{className:"mb-4",children:e.jsx(C,{children:e.jsxs(F,{className:"row gx-3 gy-2 align-items-center",onSubmit:r=>{r.preventDefault(),_()},children:[e.jsx(i,{sm:3,children:e.jsx(B,{id:"specificSizeInputName",name:"search",value:o.search,onChange:w,placeholder:"Route name"})}),e.jsx(i,{sm:3,children:e.jsx(v,{onChange:R,endpoint:"routes",label:"Routes",filter:[{with_stops:0}]})}),e.jsx(i,{xs:"auto",children:e.jsx(f,{color:"primary",type:"submit",children:"Search"})}),e.jsx(i,{xs:"auto",children:e.jsx(f,{color:"primary",onClick:()=>setShowAddModal(!0),children:"Add"})})]})})}),h&&e.jsx(H,{color:"danger",onClose:y,dismissible:!0,children:h})]})}),e.jsx(C,{children:b?e.jsx(A,{color:"primary"}):e.jsxs(I,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx(k,{children:e.jsxs(S,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:"Serial No"}),e.jsx(a,{children:"Route No"}),e.jsx(a,{children:"Stop Name"}),e.jsx(a,{children:"Depart At"}),e.jsx(a,{children:"Arrived At"}),e.jsx(a,{children:"Delayed Time (min)"}),e.jsx(a,{children:"Distance (km)"})]})}),e.jsx(z,{children:(j=c==null?void 0:c.route_stops)==null?void 0:j.map((r,s)=>{var n;return e.jsxs(S,{children:[e.jsx(t,{children:s+1}),e.jsx(t,{children:r.serial_no||""}),e.jsx(t,{children:r.route_id||""}),e.jsx(t,{children:((n=r.site)==null?void 0:n.name)||""}),e.jsx(t,{children:r.dept_time||""}),e.jsx(t,{children:r.arr_time||""}),e.jsx(t,{children:r.delayed_time||""}),e.jsx(t,{children:r.distance||""})]},s)})})]})})]})})})};export{$ as default};
